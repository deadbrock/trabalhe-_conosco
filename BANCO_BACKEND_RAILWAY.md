# üóÑÔ∏è BANCO DE DADOS E BACKEND - RAILWAY

## üéØ RESPOSTAS R√ÅPIDAS

### **‚ùì Preciso de banco de dados?**
‚úÖ **SIM!** E j√° est√° implementado no projeto.

### **‚ùì Preciso de backend?**
‚úÖ **SIM!** E j√° est√° implementado no projeto.

### **‚ùì Railway √© uma boa escolha?**
‚úÖ **SIM!** √â perfeito para este projeto. Railway oferece:
- ‚úÖ PostgreSQL integrado
- ‚úÖ Deploy autom√°tico do backend
- ‚úÖ Plano gratuito para come√ßar
- ‚úÖ F√°cil de usar

---

## üì¶ O QUE J√Å EST√Å IMPLEMENTADO

### **1. üóÑÔ∏è BANCO DE DADOS (PostgreSQL)**
**Status:** ‚úÖ Implementado completamente

**Tabelas criadas:**
```sql
1. vagas            - Armazena vagas publicadas
2. candidatos       - Armazena candidatos e curr√≠culos
3. usuarios         - Armazena usu√°rios do RH (admin)
```

**Banco de Talentos:**
- ‚úÖ J√° funciona com a tabela `candidatos`
- ‚úÖ Campo `status` inclui "banco_talentos"
- ‚úÖ Filtros e ordena√ß√£o implementados
- ‚úÖ Interface completa (frontend + backend)

---

### **2. üîß BACKEND (Node.js + Express)**
**Status:** ‚úÖ Implementado completamente

**Arquivos do backend:**
```
trabalhe-_conosco/server/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js              ‚úÖ Servidor Express
‚îÇ   ‚îú‚îÄ‚îÄ db.js                 ‚úÖ Conex√£o PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ migrate.js            ‚úÖ Criar tabelas
‚îÇ   ‚îú‚îÄ‚îÄ seed.js               ‚úÖ Dados iniciais
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.js           ‚úÖ Login do RH
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vagas.js          ‚úÖ CRUD de vagas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ candidatos.js     ‚úÖ CRUD de candidatos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metrics.js        ‚úÖ M√©tricas do dashboard
‚îÇ   ‚îî‚îÄ‚îÄ middleware/
‚îÇ       ‚îî‚îÄ‚îÄ auth.js           ‚úÖ Autentica√ß√£o JWT
‚îú‚îÄ‚îÄ package.json              ‚úÖ Depend√™ncias
‚îî‚îÄ‚îÄ .env.example              ‚úÖ Vari√°veis de ambiente
```

**APIs implementadas:**
```
POST   /auth/login           - Login do RH
GET    /vagas                 - Listar vagas
POST   /vagas                 - Criar vaga (RH)
PUT    /vagas/:id             - Editar vaga (RH)
DELETE /vagas/:id             - Deletar vaga (RH)
GET    /candidatos            - Listar candidatos (RH)
GET    /candidatos/:vagaId    - Candidatos por vaga (RH)
POST   /candidatos            - Candidatar-se (p√∫blico)
PUT    /candidatos/:id        - Atualizar candidato (RH)
GET    /metrics               - M√©tricas do dashboard (RH)
```

---

## üöÄ DEPLOY NO RAILWAY (PASSO A PASSO)

### **OP√á√ÉO 1: Deploy Autom√°tico (RECOMENDADO)** ‚≠ê

#### **Passo 1: Criar conta no Railway**
1. Acesse: https://railway.app
2. Clique em **"Start a New Project"**
3. Fa√ßa login com GitHub

#### **Passo 2: Criar PostgreSQL**
1. No Railway, clique em **"+ New"**
2. Escolha **"Database"** ‚Üí **"PostgreSQL"**
3. Railway cria automaticamente:
   - ‚úÖ Banco de dados PostgreSQL
   - ‚úÖ Vari√°vel `DATABASE_URL`
   - ‚úÖ Senha autom√°tica

#### **Passo 3: Deploy do Backend**

**3.1 - Conectar reposit√≥rio:**
1. Clique em **"+ New"** ‚Üí **"GitHub Repo"**
2. Selecione seu reposit√≥rio
3. Escolha a pasta: **`server`**

**3.2 - Configurar vari√°veis de ambiente:**

No Railway, v√° em **Variables** e adicione:

```bash
# Porta
PORT=3333

# Banco de dados (Railway gera automaticamente)
DATABASE_URL=${{PostgreSQL.DATABASE_URL}}

# JWT Secret
JWT_SECRET=um_segredo_bem_secreto_e_longo_para_jwt_aqui

# Node env
NODE_ENV=production
```

**3.3 - Configurar build:**

Railway detecta automaticamente, mas garanta que `package.json` tenha:

```json
{
  "scripts": {
    "start": "node dist/index.js",
    "build": "tsc -p tsconfig.json",
    "postinstall": "npm run build"
  },
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=9.0.0"
  }
}
```

**3.4 - Deploy:**
1. Railway faz deploy automaticamente
2. Ap√≥s deploy, copie a URL do backend
3. Exemplo: `https://seu-backend.railway.app`

#### **Passo 4: Rodar Migrations**

No Railway, abra o **Terminal** do backend e execute:

```bash
npm run migrate
npm run seed
```

Isso cria as tabelas e o usu√°rio admin.

#### **Passo 5: Configurar Frontend**

No Vercel (ou onde hospedar o frontend), adicione a vari√°vel:

```bash
NEXT_PUBLIC_API_BASE=https://seu-backend.railway.app
```

---

### **OP√á√ÉO 2: Deploy Manual (CLI)**

#### **1. Instalar Railway CLI:**
```bash
npm i -g @railway/cli
```

#### **2. Fazer login:**
```bash
railway login
```

#### **3. Criar projeto:**
```bash
cd trabalhe-_conosco/server
railway init
```

#### **4. Adicionar PostgreSQL:**
```bash
railway add postgresql
```

#### **5. Deploy:**
```bash
railway up
```

#### **6. Configurar vari√°veis:**
```bash
railway variables set JWT_SECRET="seu_secret_aqui"
railway variables set PORT=3333
```

#### **7. Rodar migrations:**
```bash
railway run npm run migrate
railway run npm run seed
```

---

## üóÑÔ∏è ESTRUTURA DO BANCO DE DADOS

### **Tabela: vagas**
```sql
CREATE TABLE vagas (
  id SERIAL PRIMARY KEY,
  titulo TEXT NOT NULL,
  tipo_contrato TEXT NOT NULL,
  endereco TEXT NOT NULL,
  descricao TEXT,
  requisitos TEXT,
  diferenciais TEXT,
  status TEXT DEFAULT 'ativa',
  criado_em TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**Exemplo de dados:**
```
id | titulo                | tipo_contrato | endereco      | status
---|----------------------|---------------|---------------|--------
1  | Desenvolvedor Full   | CLT           | S√£o Paulo, SP | ativa
2  | Designer UX/UI       | PJ            | Remoto        | ativa
```

---

### **Tabela: candidatos (BANCO DE TALENTOS)**
```sql
CREATE TABLE candidatos (
  id SERIAL PRIMARY KEY,
  nome TEXT NOT NULL,
  cpf TEXT NOT NULL,
  data_nascimento DATE,
  email TEXT NOT NULL,
  telefone TEXT,
  estado TEXT,
  cidade TEXT,
  bairro TEXT,
  curriculo TEXT,
  vaga_id INTEGER REFERENCES vagas(id) ON DELETE CASCADE,
  status TEXT DEFAULT 'novo',
  data_cadastro TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**Status poss√≠veis:**
- `novo` - Candidato rec√©m-inscrito
- `em_analise` - Em an√°lise pelo RH
- `entrevista` - Agendada entrevista
- `aprovado` - Aprovado
- `reprovado` - N√£o aprovado
- **`banco_talentos`** ‚≠ê - No banco de talentos

**Exemplo de dados:**
```
id | nome           | email              | vaga_id | status         | cidade
---|----------------|-------------------|---------|----------------|--------
1  | Jo√£o Silva     | joao@email.com    | 1       | novo           | SP
2  | Maria Santos   | maria@email.com   | 1       | banco_talentos | RJ
3  | Pedro Costa    | pedro@email.com   | 2       | em_analise     | MG
```

**Banco de Talentos:**
- ‚úÖ Candidatos com `status = 'banco_talentos'`
- ‚úÖ Filtros por localiza√ß√£o (estado, cidade, bairro)
- ‚úÖ Ordena√ß√£o por proximidade
- ‚úÖ Interface completa em `/rh/banco-talentos`

---

### **Tabela: usuarios**
```sql
CREATE TABLE usuarios (
  id SERIAL PRIMARY KEY,
  nome TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  senha_hash TEXT NOT NULL,
  perfil TEXT NOT NULL
);
```

**Usu√°rio admin padr√£o:**
```
Email: admin@fgservices.com
Senha: admin123
```

---

## üîå COMO O SISTEMA FUNCIONA

### **1. Candidato se inscreve:**
```
Frontend (Next.js)
    ‚Üì POST /candidatos
Backend (Express)
    ‚Üì INSERT INTO candidatos
Banco (PostgreSQL)
    ‚Üì Salva com status="novo"
‚úÖ Candidato no sistema
```

### **2. RH move para Banco de Talentos:**
```
RH acessa /rh/candidatos
    ‚Üì Clica em "Mover para Banco de Talentos"
Frontend envia PUT /candidatos/:id
    ‚Üì { status: "banco_talentos" }
Backend atualiza status
    ‚Üì UPDATE candidatos SET status='banco_talentos'
‚úÖ Candidato no Banco de Talentos
```

### **3. RH acessa Banco de Talentos:**
```
RH acessa /rh/banco-talentos
    ‚Üì GET /candidatos?status=banco_talentos
Backend busca
    ‚Üì SELECT * FROM candidatos WHERE status='banco_talentos'
PostgreSQL retorna
    ‚Üì Lista de candidatos
‚úÖ Exibe no frontend
```

---

## üí∞ CUSTOS DO RAILWAY

### **Plano Gratuito (Trial):**
- ‚úÖ $5 de cr√©dito gr√°tis por m√™s
- ‚úÖ PostgreSQL inclu√≠do
- ‚úÖ Suficiente para projetos pequenos
- ‚úÖ Perfeito para come√ßar

### **Plano Hobby ($5/m√™s):**
- ‚úÖ $5 de cr√©dito + $5/m√™s
- ‚úÖ Melhor uptime
- ‚úÖ Recomendado para produ√ß√£o

### **Estimativa de uso:**
```
PostgreSQL:  ~$2/m√™s (uso leve)
Backend:     ~$2/m√™s (uso leve)
Total:       ~$4/m√™s
```

**Conclus√£o:** O plano gratuito √© suficiente para come√ßar! üéâ

---

## ‚úÖ CHECKLIST DE DEPLOY

### **No Railway:**
- [ ] Criar conta
- [ ] Criar PostgreSQL
- [ ] Deploy do backend (conectar GitHub)
- [ ] Configurar vari√°veis de ambiente
- [ ] Rodar migrations (`npm run migrate`)
- [ ] Rodar seed (`npm run seed`)
- [ ] Copiar URL do backend

### **No Vercel (Frontend):**
- [ ] Deploy do frontend
- [ ] Adicionar vari√°vel `NEXT_PUBLIC_API_BASE`
- [ ] Configurar dom√≠nio (trabalheconoscofg.com.br)

### **Testar:**
- [ ] Acessar site
- [ ] Ver vagas (devem vir do backend)
- [ ] Candidatar-se
- [ ] Login no RH (admin@fgservices.com / admin123)
- [ ] Ver candidatos no painel
- [ ] Mover candidato para Banco de Talentos
- [ ] Acessar /rh/banco-talentos

---

## üîß VARI√ÅVEIS DE AMBIENTE

### **Backend (.env no Railway):**
```bash
# Porta do servidor
PORT=3333

# Conex√£o PostgreSQL (Railway gera automaticamente)
DATABASE_URL=postgresql://user:password@host:5432/database

# JWT Secret (gere um aleat√≥rio)
JWT_SECRET=um_segredo_bem_secreto_e_longo_para_jwt_aqui

# Ambiente
NODE_ENV=production
```

### **Frontend (.env.local no Vercel):**
```bash
# URL do backend no Railway
NEXT_PUBLIC_API_BASE=https://seu-backend.railway.app
```

---

## üêõ TROUBLESHOOTING

### **Erro: "Cannot connect to database"**
**Solu√ß√£o:**
- Verifique se PostgreSQL est√° rodando no Railway
- Verifique se `DATABASE_URL` est√° configurada
- Execute migrations: `railway run npm run migrate`

### **Erro: "Unauthorized" no login**
**Solu√ß√£o:**
- Execute seed: `railway run npm run seed`
- Cria usu√°rio admin automaticamente

### **Erro: "No vagas found"**
**Solu√ß√£o:**
- Publique vagas pelo painel RH
- Ou crie manualmente no banco

### **Erro: "CORS blocked"**
**Solu√ß√£o:**
- Backend j√° tem CORS habilitado
- Verifique se `NEXT_PUBLIC_API_BASE` est√° correto

---

## üìä ARQUITETURA COMPLETA

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         FRONTEND (Vercel)               ‚îÇ
‚îÇ      trabalheconoscofg.com.br           ‚îÇ
‚îÇ  Next.js + React + Tailwind CSS         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üï HTTP/JSON
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       BACKEND (Railway)                 ‚îÇ
‚îÇ  https://seu-backend.railway.app        ‚îÇ
‚îÇ  Node.js + Express + JWT                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üï SQL
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   BANCO DE DADOS (Railway)              ‚îÇ
‚îÇ         PostgreSQL 14+                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ vagas                              ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ candidatos (BANCO DE TALENTOS)     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ usuarios                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ RESUMO EXECUTIVO

### **Sim, voc√™ PRECISA de:**

‚úÖ **Banco de dados** (PostgreSQL)
- Para armazenar vagas
- Para armazenar candidatos
- **Para o Banco de Talentos**

‚úÖ **Backend** (Node.js + Express)
- Para criar/editar vagas
- Para receber candidaturas
- Para autenticar RH
- Para gerenciar Banco de Talentos

### **O que j√° est√° pronto:**

‚úÖ Banco de dados (schema completo)
‚úÖ Backend (API completa)
‚úÖ Migrations (criar tabelas)
‚úÖ Seed (usu√°rio admin)
‚úÖ Frontend (interface completa)
‚úÖ Banco de Talentos (totalmente funcional)

### **O que voc√™ precisa fazer:**

1. ‚úÖ Criar conta no Railway
2. ‚úÖ Criar PostgreSQL
3. ‚úÖ Deploy do backend
4. ‚úÖ Rodar migrations
5. ‚úÖ Configurar frontend com URL do backend

**Tempo estimado:** 20-30 minutos

---

## üìö DOCUMENTA√á√ÉO √öTIL

### **Railway:**
- Docs: https://docs.railway.app
- Exemplos: https://railway.app/templates
- Suporte: https://help.railway.app

### **PostgreSQL:**
- Docs: https://www.postgresql.org/docs/

### **Guias do projeto:**
- `DEPLOY_RAILWAY.md` - Deploy completo
- `SETUP_BACKEND.md` - Setup do backend
- `BANCO_TALENTOS.md` - Sobre o Banco de Talentos

---

## üéâ CONCLUS√ÉO

### **Respondendo suas perguntas:**

‚ùì **"Preciso de banco de dados?"**
‚úÖ SIM! PostgreSQL j√° est√° implementado, s√≥ precisa hospedar no Railway.

‚ùì **"Preciso de backend?"**
‚úÖ SIM! Node.js + Express j√° est√° implementado, s√≥ precisa fazer deploy no Railway.

‚ùì **"Railway √© boa escolha?"**
‚úÖ SIM! √â perfeita! Oferece PostgreSQL + Backend em um s√≥ lugar, com plano gratuito.

### **Banco de Talentos:**
‚úÖ **Totalmente funcional**
‚úÖ Usa a tabela `candidatos` (campo `status`)
‚úÖ Interface completa em `/rh/banco-talentos`
‚úÖ Filtros por localiza√ß√£o
‚úÖ Ordena√ß√£o por proximidade

### **Pr√≥ximos passos:**
1. üöÄ Deploy no Railway (20 min)
2. üåê Configurar dom√≠nio no Vercel
3. ‚úÖ Testar sistema completo
4. üéä Seu sistema est√° no ar!

**Tudo est√° pronto! S√≥ falta fazer o deploy! üöÄ**

---

**Arquivo:** `BANCO_BACKEND_RAILWAY.md`  
**Vers√£o:** 1.0  
**Projeto:** Trabalhe Conosco - FG Services  
**Data:** 2025

